2021 10 07

문제점1: 플레이어 처음 이동 시 뚝뚝 끊기는 식으로 이동

원인: 마우스가 플레이어 위치를 받아온 후 플레이어 이동 순서로 업데이트가 돔. 해당 문제는 원시문자열 포인터로 태그를 주다보니 맵에서 키정렬이 안됨. 

해결: 구조를 맵에서 vector로 변환 후 enum 값으로 태그를 줘서 업데이트 순서를 결정.

---

목표1: 카메라 바라보는 방향을 위 아래 가능하게 하기

문제점1: 좌우는 플레이어의 look을 돌리면 됐지만 상하는 플레이어의 look을 돌리면 플레이어가 x축 기준으로 빙빙 돌아버린다.

공전 중인데 플레이어를 안 돌리고 카메라의 look만 돌리면 뷰가 이상해짐

해결 방안: 로컬 단계에서 기준을 잡아줄 때 마우스 상하 이동에 따른 별도의 값을 추가호 더해준다(y,z) 해결. 이후 at(보는 방향)을 지정해 줄 때 기존의 look에 추가로 각도에 따른 값 추가 해결


--
10.07

목표 2: 기차에 문짝 달고 트리거 설치 후 문 여닫기
목표 a- mfc 로테이션 값 줄 때 소수점 넣으면 좀 이상하게 들어가는 문제 발생
-->주의해서 입력하는 걸로 적당히 합의

트리거 설치를 위해 콜리더를 달아야 하는데
-문짝에 다는 건 성공
-17:27분-플레이어 손에 충돌 구체를 달고 구와 직육면체 충돌 고민
-또는 플레이어를 감싸는 적당한 크기의 별도의 직육면체 충돌체 제작
-고민해보니 상호작용할 오브젝트가 많은 편이 아니니 오브젝트 상호작용용 플레이어 직육면체 충돌체를 지정해주고 충돌체크(단, 플레이어와 특정 거리이상일 때는 연산을 생략하는 식으로)

-구현방안

1. 플레이어에서 오브젝트 리스트를 가져온다.
2. 플레이어 pos 와 물체가 접촉할 수 있는 최악의 케이스의 거리(예를 들면 플레이어 pos는 바닥기준이니 바닥에서 제일 먼 점의 거리 + 물체 중점에서 제일 먼점 의 합보다 플레이어와 물체 중점의 거리가 멀면 스킵
3. obb 계산 후 충돌하면 이동 취소 및 해당 오브젝트 충돌 상태로

해결

추가 문제-충돌 시 플레이어가 물체와 붙어버림

해결방안 ->플레이어의 진행 방향을 더 이상 물체를 파고들지 않는 방향으로 밀어내기

추가 문제 ->문 여닫는 기능을 애니메이션으로 하면 애니메이션이 있는 스테틱 매쉬와 없는 스테틱 매쉬를 구분해야한다.
->애니메이션 기능 자체가 본을 기반으로 부모 자식 행렬을 건드리는 거라서 스테틱 용으로 변환시키기가 어렵지 않나 싶음.
->현 단계에서 구현하고자 하는 애니메이션이 많지 않음(미닫이 문, 슬라이더 문 2개)



목표 3: 플레이어 애니메이션

목표 4: 플레이어 총 달아주기
-위에서 손에 충돌 구체 달아주기가 성공한다면 총 위치 잡아주기 용이할 듯

10월 15일

1. 스테이트 패턴 구현
2. 몬스터 별로 클래스 구현(몬스터 클래스 상속)
3. 무기 별로 클래스 구현(이건 수가 적어서 따로 만드는 식으로)
4. 맵 만들기
--

맵 만들어지면 애니메이션 잡아서 전투가 부드럽게 보이는 거 
전투- 공격 막기 회피

현재 통맵을 분할해둔 머지 오브젝트 모음을 발견
xfile txt 상태로는 50메가 정도가 한 번에 크리에이트 할 수 있는 마지노선 (대략 3개 묶음)

16일 아침 bin 모드로 변경해서 묶음을 더 늘릴 수 있는 지 체크

22일까지 구현